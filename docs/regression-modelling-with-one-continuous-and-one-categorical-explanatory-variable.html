<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Regression modelling with one continuous and one categorical explanatory variable | Data Analysis: Regression Modelling</title>
  <meta name="description" content="Regression modelling with one continuous and one categorical explanatory variable | Data Analysis: Regression Modelling" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Regression modelling with one continuous and one categorical explanatory variable | Data Analysis: Regression Modelling" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Regression modelling with one continuous and one categorical explanatory variable | Data Analysis: Regression Modelling" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="regression-modelling-with-two-continuous-explanatory-variables.html"/>
<link rel="next" href="further-tasks-multiple-linear-regression.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html"><i class="fa fa-check"></i>Simple linear regression</a></li>
<li class="chapter" data-level="" data-path="simple-linear-regression-with-one-numerical-explanatory-variable.html"><a href="simple-linear-regression-with-one-numerical-explanatory-variable.html"><i class="fa fa-check"></i>Simple linear regression with one numerical explanatory variable</a>
<ul>
<li class="chapter" data-level="" data-path="simple-linear-regression-with-one-numerical-explanatory-variable.html"><a href="simple-linear-regression-with-one-numerical-explanatory-variable.html#exploratory-data-analysis"><i class="fa fa-check"></i>Exploratory data analysis</a></li>
<li class="chapter" data-level="" data-path="simple-linear-regression-with-one-numerical-explanatory-variable.html"><a href="simple-linear-regression-with-one-numerical-explanatory-variable.html#correlation"><i class="fa fa-check"></i>Correlation</a></li>
<li class="chapter" data-level="" data-path="simple-linear-regression-with-one-numerical-explanatory-variable.html"><a href="simple-linear-regression-with-one-numerical-explanatory-variable.html#formal-analysis"><i class="fa fa-check"></i>Formal analysis</a></li>
<li class="chapter" data-level="" data-path="simple-linear-regression-with-one-numerical-explanatory-variable.html"><a href="simple-linear-regression-with-one-numerical-explanatory-variable.html#assessing-model-fit"><i class="fa fa-check"></i>Assessing model fit</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="simple-linear-regression-with-one-categorical-explanatory-variable.html"><a href="simple-linear-regression-with-one-categorical-explanatory-variable.html"><i class="fa fa-check"></i>Simple linear regression with one categorical explanatory variable</a>
<ul>
<li class="chapter" data-level="" data-path="simple-linear-regression-with-one-categorical-explanatory-variable.html"><a href="simple-linear-regression-with-one-categorical-explanatory-variable.html#exploratory-data-analysis-1"><i class="fa fa-check"></i>Exploratory data analysis</a></li>
<li class="chapter" data-level="" data-path="simple-linear-regression-with-one-categorical-explanatory-variable.html"><a href="simple-linear-regression-with-one-categorical-explanatory-variable.html#formal-analysis-1"><i class="fa fa-check"></i>Formal analysis</a></li>
<li class="chapter" data-level="" data-path="simple-linear-regression-with-one-categorical-explanatory-variable.html"><a href="simple-linear-regression-with-one-categorical-explanatory-variable.html#assessing-model-fit-1"><i class="fa fa-check"></i>Assessing model fit</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="further-tasks-simple-linear-regression.html"><a href="further-tasks-simple-linear-regression.html"><i class="fa fa-check"></i>Further Tasks: Simple Linear Regression</a></li>
<li class="chapter" data-level="" data-path="multiple-linear-regression.html"><a href="multiple-linear-regression.html"><i class="fa fa-check"></i>Multiple Linear Regression</a></li>
<li class="chapter" data-level="" data-path="regression-modelling-with-two-continuous-explanatory-variables.html"><a href="regression-modelling-with-two-continuous-explanatory-variables.html"><i class="fa fa-check"></i>Regression modelling with two continuous explanatory variables</a>
<ul>
<li class="chapter" data-level="" data-path="regression-modelling-with-two-continuous-explanatory-variables.html"><a href="regression-modelling-with-two-continuous-explanatory-variables.html#exploratory-data-analysis-2"><i class="fa fa-check"></i>Exploratory data analysis</a></li>
<li class="chapter" data-level="" data-path="regression-modelling-with-two-continuous-explanatory-variables.html"><a href="regression-modelling-with-two-continuous-explanatory-variables.html#formal-analysis-2"><i class="fa fa-check"></i>Formal analysis</a></li>
<li class="chapter" data-level="" data-path="regression-modelling-with-two-continuous-explanatory-variables.html"><a href="regression-modelling-with-two-continuous-explanatory-variables.html#assessing-model-fit-2"><i class="fa fa-check"></i>Assessing model fit</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html"><i class="fa fa-check"></i>Regression modelling with one continuous and one categorical explanatory variable</a>
<ul>
<li class="chapter" data-level="" data-path="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#exploratory-data-analysis-3"><i class="fa fa-check"></i>Exploratory data analysis</a></li>
<li class="chapter" data-level="" data-path="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#multiple-regression-parallel-slopes-model"><i class="fa fa-check"></i>Multiple regression: parallel slopes model</a></li>
<li class="chapter" data-level="" data-path="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#multiple-regression-interaction-model"><i class="fa fa-check"></i>Multiple regression: interaction model</a></li>
<li class="chapter" data-level="" data-path="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#assessing-model-fit-3"><i class="fa fa-check"></i>Assessing model fit</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="further-tasks-multiple-linear-regression.html"><a href="further-tasks-multiple-linear-regression.html"><i class="fa fa-check"></i>Further Tasks: Multiple Linear Regression</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis: Regression Modelling</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable" class="section level1 unnumbered hasAnchor">
<h1>Regression modelling with one continuous and one categorical explanatory variable<a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Let's revisit the instructor evaluation data set <code>evals</code> we used for simple linear regression. You were tasked with examining the relationship between teaching score (<code>score</code>) and age (<code>age</code>). Now, let's also introduce the additional (binary) categorical explanatory variable gender (<code>gender</code>). That is, we will be examining:</p>
<ul>
<li>the teaching score (<code>score</code>) as our outcome variable <span class="math inline">\(y\)</span>;</li>
<li>age (<code>age</code>) as our continuous explanatory variable <span class="math inline">\(x_1\)</span>; and</li>
<li>gender (<code>gender</code>) as our categorical explanatory variable <span class="math inline">\(x_2\)</span>.</li>
</ul>
<div id="exploratory-data-analysis-3" class="section level2 unnumbered hasAnchor">
<h2>Exploratory data analysis<a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#exploratory-data-analysis-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Task</strong>: Start by subsetting the <code>evals</code> data set so that we only have the variables we are interested in, that is, <code>score</code>, <code>age</code> and <code>gender</code>. Note, it is best to give your new data set a different name than evals as to not overwrite the original <code>evals</code> data set.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb62-1" aria-hidden="true" tabindex="-1"></a>eval.score <span class="ot">&lt;-</span> evals <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(score, age, gender)</span></code></pre></div>
</div>
<p><br></p>
<p>Your new data set should look like the one below.</p>
<pre><code># A tibble: 6 x 3
  score   age gender
  &lt;dbl&gt; &lt;int&gt; &lt;fct&gt; 
1   4.7    36 female
2   4.1    36 female
3   3.9    36 female
4   4.8    36 female
5   4.6    59 male  
6   4.3    59 male  </code></pre>
<p><strong>Note</strong>: You can also view your data set using the <code>glimpse</code> function, or by opening a spreadsheet view in RStudio using the <code>View</code> function.</p>
<p>We can use the <code>skim</code> function to obtain some summary statistics from our data:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb64-1" aria-hidden="true" tabindex="-1"></a>eval.score <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()</span></code></pre></div>
<table>
<caption><span id="tab:evalssum">Table 4: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">463</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">gender</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">mal: 268, fem: 195</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">score</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4.17</td>
<td align="right">0.54</td>
<td align="right">2.3</td>
<td align="right">3.8</td>
<td align="right">4.3</td>
<td align="right">4.6</td>
<td align="right">5</td>
<td align="left">▁▁▅▇▇</td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">48.37</td>
<td align="right">9.80</td>
<td align="right">29.0</td>
<td align="right">42.0</td>
<td align="right">48.0</td>
<td align="right">57.0</td>
<td align="right">73</td>
<td align="left">▅▆▇▆▁</td>
</tr>
</tbody>
</table>
<p><br></p>
<strong>How many males are in the data set?</strong>
<div id="radio_MUWRXTCSIE" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_MUWRXTCSIE" value=""></input> <span>195</span></label><label><input type="radio" autocomplete="off" name="radio_MUWRXTCSIE" value=""></input> <span>463</span></label><label><input type="radio" autocomplete="off" name="radio_MUWRXTCSIE" value="answer"></input> <span>268</span></label>
</div>
<p><br></p>
<strong>What is the median age in the data set?</strong>
<div id="radio_ZCDPDWPRHC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ZCDPDWPRHC" value=""></input> <span>57.00</span></label><label><input type="radio" autocomplete="off" name="radio_ZCDPDWPRHC" value=""></input> <span>48.37</span></label><label><input type="radio" autocomplete="off" name="radio_ZCDPDWPRHC" value="answer"></input> <span>48.00</span></label>
</div>
<p><br></p>
<strong>What is the maximum teaching score of the bottom 25% of professors?</strong>
<div id="radio_HCBXOMBKCL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_HCBXOMBKCL" value=""></input> <span>2.3</span></label><label><input type="radio" autocomplete="off" name="radio_HCBXOMBKCL" value=""></input> <span>4.3</span></label><label><input type="radio" autocomplete="off" name="radio_HCBXOMBKCL" value="answer"></input> <span>3.8</span></label>
</div>
<p><br></p>
<p>Now, let's compute the correlation coefficient between our outcome variable <code>score</code> and our continuous explanatory variable <code>age</code>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb65-1" aria-hidden="true" tabindex="-1"></a>eval.score <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_correlation</span>(<span class="at">formula =</span> score <span class="sc">~</span> age)</span></code></pre></div>
<pre><code># A tibble: 1 x 1
     cor
   &lt;dbl&gt;
1 -0.107</code></pre>
<p><strong>Note</strong>: The correlation coefficient only exists between continuous variables, which is why we do not include our categorical variable <code>gender</code>.</p>
<p><br></p>
<strong>What is the verbal interpretation of the correlation coefficient?</strong>
<div id="radio_JDUBROCZUQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_JDUBROCZUQ" value=""></input> <span>Moderate positive</span></label><label><input type="radio" autocomplete="off" name="radio_JDUBROCZUQ" value="answer"></input> <span>Very weak negative</span></label><label><input type="radio" autocomplete="off" name="radio_JDUBROCZUQ" value=""></input> <span>Weak negative</span></label><label><input type="radio" autocomplete="off" name="radio_JDUBROCZUQ" value=""></input> <span>Very weak positive</span></label>
</div>
<p><br></p>
<p>We can now visualise our data by producing a scatterplot, where seeing as we have the categorical variable <code>gender</code>, we shall plot the points using different colours for each gender:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(eval.score, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> score, <span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb67-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb67-3"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Age&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Teaching Score&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Gender&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-4"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:evalsscat"></span>
<img src="main_files/figure-html/evalsscat-1.png" alt="Instructor evaluation scores by age and gender. The points have been jittered." width="90%" />
<p class="caption">
Figure 19: Instructor evaluation scores by age and gender. The points have been jittered.
</p>
</div>
<p><strong>Note</strong>: The above code has jittered the points, however, this is not necessary and <code>geom_point</code> would suffice. To plot separate points by gender we simply add the <code>color</code> argument to the <code>aes</code> function and pass to it <code>gender</code>.</p>
<p>From the scatterplot we can see that:</p>
<ul>
<li>There are very few women over the age of 60 in our data set.</li>
<li>From the plotted regression lines we can see that the lines have different slopes for men and women. That is, the associated effect of increasing age appears to be more severe for women than it does for men, i.e. the teaching score of women drops faster with age.</li>
</ul>
</div>
<div id="multiple-regression-parallel-slopes-model" class="section level2 unnumbered hasAnchor">
<h2>Multiple regression: parallel slopes model<a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#multiple-regression-parallel-slopes-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here, we shall begin by fitting what is referred to as a parallel regression lines model. This model implies that the slope of relationship between teaching score (<code>score</code>) and age (<code>age</code>) is the same for both males and females, with only the intercept of the regression lines changing. Hence, our parallel regression lines model is given as:</p>
<p><span class="math display">\[\begin{align}
y_{i} &amp;= \alpha + \beta_1 x_{1i} + \beta_2  x_{2i} + \epsilon_i \nonumber \\
&amp;= \alpha + \beta_{\mbox{age}} \cdot \mbox{age}_i + \beta_{\mbox{male}} \cdot \mathbb{I}_{\mbox{male}}(i) + \epsilon_i, \nonumber
\end{align}\]</span></p>
<p>where</p>
<ul>
<li><p><span class="math inline">\(\alpha\)</span> is the intercept of the regression line for females;</p></li>
<li><p><span class="math inline">\(\beta_{\mbox{age}}\)</span> is the slope of the regression line for both males and females;</p></li>
<li><p><span class="math inline">\(\mbox{age}_i\)</span> is the age of the <span class="math inline">\(i\)</span>th observation</p></li>
<li><p><span class="math inline">\(\beta_{\mbox{male}}\)</span> is the additional term added to <span class="math inline">\(\alpha\)</span> to get the intercept of the regression line for males; and</p></li>
<li><p><span class="math inline">\(\mathbb{I}_{\mbox{male}}(i)\)</span> is an indicator function such that</p>
<p><span class="math display">\[\mathbb{I}_{\mbox{male}}(i)=\left\{
            \begin{array}{ll}
              1 ~~~ \mbox{if the} ~ i \mbox{th observation is male},\\
              0 ~~~ \mbox{Otherwise}.\\
            \end{array}
          \right.\]</span></p></li>
</ul>
<p>We can fit the parallel regression lines model as follows:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb68-1" aria-hidden="true" tabindex="-1"></a>par.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(score <span class="sc">~</span> age <span class="sc">+</span> gender, <span class="at">data =</span> eval.score)</span>
<span id="cb68-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_regression_table</span>(par.model)</span></code></pre></div>
<pre><code># A tibble: 3 x 7
  term         estimate std_error statistic p_value lower_ci upper_ci
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 intercept       4.48      0.125     35.8    0        4.24     4.73 
2 age            -0.009     0.003     -3.28   0.001   -0.014   -0.003
3 gender: male    0.191     0.052      3.63   0        0.087    0.294</code></pre>
<p>Hence, the regression line for females is given by:</p>
<p><span class="math display">\[\widehat{\mbox{score}} = 4.48 - 0.009 \cdot \mbox{age},\]</span></p>
<p>while the regression line for males is given by:</p>
<p><span class="math display">\[\widehat{\mbox{score}} = 4.48 - 0.009 \cdot \mbox{age} + 0.191 = 4.671 - 0.009 \cdot \mbox{age}.\]</span></p>
<p><br></p>
<strong>From the parallel regression lines model, what would be the teaching score of a female instructor aged 37?</strong>
<div id="radio_HSKKMPILBU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_HSKKMPILBU" value=""></input> <span>4.338</span></label><label><input type="radio" autocomplete="off" name="radio_HSKKMPILBU" value=""></input> <span>4.246</span></label><label><input type="radio" autocomplete="off" name="radio_HSKKMPILBU" value="answer"></input> <span>4.147</span></label><label><input type="radio" autocomplete="off" name="radio_HSKKMPILBU" value=""></input> <span>4.451</span></label>
</div>
<p><br></p>
<strong>From the parallel regression lines model, what would be the teaching score of a male instructor aged 52?</strong>
<div id="radio_HPEXSEARRN" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_HPEXSEARRN" value=""></input> <span>4.012</span></label><label><input type="radio" autocomplete="off" name="radio_HPEXSEARRN" value=""></input> <span>4.302</span></label><label><input type="radio" autocomplete="off" name="radio_HPEXSEARRN" value="answer"></input> <span>4.203</span></label><label><input type="radio" autocomplete="off" name="radio_HPEXSEARRN" value=""></input> <span>4.159</span></label>
</div>
<p><br></p>
<p>Now, let's superimpose our parallel regression lines onto the scatterplot of teaching score against age:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-1" aria-hidden="true" tabindex="-1"></a>coeff  <span class="ot">&lt;-</span> par.model <span class="sc">%&gt;%</span> </span>
<span id="cb70-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-2" aria-hidden="true" tabindex="-1"></a>          <span class="fu">coef</span>() <span class="sc">%&gt;%</span></span>
<span id="cb70-3"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-3" aria-hidden="true" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb70-4"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-5"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-5" aria-hidden="true" tabindex="-1"></a>slopes <span class="ot">&lt;-</span> eval.score <span class="sc">%&gt;%</span></span>
<span id="cb70-6"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span></span>
<span id="cb70-7"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min =</span> <span class="fu">min</span>(age), <span class="at">max =</span> <span class="fu">max</span>(age)) <span class="sc">%&gt;%</span></span>
<span id="cb70-8"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intercept =</span> coeff[<span class="dv">1</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb70-9"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intercept =</span> <span class="fu">ifelse</span>(gender <span class="sc">==</span> <span class="st">&quot;male&quot;</span>, intercept <span class="sc">+</span> coeff[<span class="dv">3</span>], intercept)) <span class="sc">%&gt;%</span></span>
<span id="cb70-10"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(point, age, <span class="sc">-</span><span class="fu">c</span>(gender, intercept)) <span class="sc">%&gt;%</span> <span class="co">#gathers columns into rows</span></span>
<span id="cb70-11"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-11" aria-hidden="true" tabindex="-1"></a>                                                <span class="co">#See Data Wrangling Cheat Sheet</span></span>
<span id="cb70-12"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">y_hat =</span> intercept <span class="sc">+</span> age <span class="sc">*</span> coeff[<span class="dv">2</span>])</span>
<span id="cb70-13"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-14"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(eval.score, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> score, <span class="at">col =</span> gender)) <span class="sc">+</span></span>
<span id="cb70-15"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb70-16"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Age&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Teaching Score&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Gender&quot;</span>) <span class="sc">+</span></span>
<span id="cb70-17"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb70-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> slopes, <span class="fu">aes</span>(<span class="at">y =</span> y_hat), <span class="at">size =</span> <span class="dv">1</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:parscat"></span>
<img src="main_files/figure-html/parscat-1.png" alt="Instructor evaluation scores by age and gender with parallel regression lines superimposed." width="90%" />
<p class="caption">
Figure 20: Instructor evaluation scores by age and gender with parallel regression lines superimposed.
</p>
</div>
<p><strong>Note</strong>: go through the code used to create <code>coeff</code> and <code>slopes</code> and make sure you understand it.</p>
<p>From the parallel regression lines model both males and females have the same slope, that is, the associated effect of age on teaching score is the same for both men and women. Hence, for every one year increase in age, there is an associated decrease in teaching score of 0.009. However, male instructors have a higher intercept term, that is, there is a vertical bump in the regression line for males in teaching scores. This is linked to the average difference in teaching scores that males obtain relative to females.</p>
<p>What is different between our previous scatterplot of teaching score against age (Figure <a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#fig:evalsscat">19</a>) and the one we just created with our parallel lines superimposed (Figure <a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#fig:parscat">20</a>)?</p>
<p>In the original plot we have what is referred to as an interaction effect between age and gender. Hence, gender interacts in different ways for both males and females by age, and as such we should have different intercepts <strong>and</strong> slopes.</p>
</div>
<div id="multiple-regression-interaction-model" class="section level2 unnumbered hasAnchor">
<h2>Multiple regression: interaction model<a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#multiple-regression-interaction-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There is an <em>interaction effect</em> if the associated effect of one variable depends on the value of another variable. For example, the effect of age here will depend on whether the instructor is male or female, that is, the effect of age on teaching scores will differ by gender. The interaction model can be written as:</p>
<p><span class="math display">\[\begin{align}
y_{i} &amp;= \alpha + \beta_1 x_{1i} + \beta_2 x_{2i} + \beta_3 x_{1i} \cdot x_{2i} + \epsilon_i \nonumber \\
&amp;= \alpha + \beta_{\mbox{age}} \cdot \mbox{age}_i + \beta_{\mbox{male}} \cdot \mathbb{I}_{\mbox{male}}(i) + \beta_{\mbox{age, male}} \cdot \mbox{age}_i \cdot \mathbb{I}_{\mbox{male}}(i) + \epsilon_i, \nonumber
\end{align}\]</span></p>
<p>where <span class="math inline">\(\beta_{\mbox{age, male}} \cdot \mbox{age}_i \cdot \mathbb{I}_{\mbox{male}}(i)\)</span> corresponds to the interaction term.</p>
<p>In order to fit an interaction term within our regression model we replace the <code>+</code> sign with the <code>*</code> sign as follows:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb71-1" aria-hidden="true" tabindex="-1"></a>int.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(score <span class="sc">~</span> age <span class="sc">*</span> gender, <span class="at">data =</span> eval.score)</span>
<span id="cb71-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_regression_table</span>(int.model)</span></code></pre></div>
<pre><code># A tibble: 4 x 7
  term           estimate std_error statistic p_value lower_ci upper_ci
  &lt;chr&gt;             &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 intercept         4.88      0.205     23.8    0        4.48     5.29 
2 age              -0.018     0.004     -3.92   0       -0.026   -0.009
3 gender: male     -0.446     0.265     -1.68   0.094   -0.968    0.076
4 age:gendermale    0.014     0.006      2.45   0.015    0.003    0.024</code></pre>
<p>Hence, the regression line for females is given by:</p>
<p><span class="math display">\[\widehat{\mbox{score}} = 4.88 - 0.018 \cdot \mbox{age},\]</span>
while the regression line for males is given by:</p>
<p><span class="math display">\[\widehat{\mbox{score}} = 4.88 - 0.018 \cdot \mbox{age} - 0.446 + 0.014 \cdot \mbox{age} = 4.434 - 0.004 \cdot \mbox{age}.\]</span></p>
<p>Notice how the interaction model allows for different slopes for females and males (-0.018 and -0.004, respectively). These fitted lines correspond to the fitted lines we first saw in Figure <a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#fig:evalsscat">19</a>, repeated in Figure <a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#fig:intscat">21</a> but without the <code>jitter</code>ing:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(eval.score, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> score, <span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb73-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb73-3"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Age&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Teaching Score&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Gender&quot;</span>) <span class="sc">+</span></span>
<span id="cb73-4"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:intscat"></span>
<img src="main_files/figure-html/intscat-1.png" alt="Instructor evaluation scores by age and gender with interaction model fit added (same as Figure \@ref(fig:evalsscat) but without jittering)." width="90%" />
<p class="caption">
Figure 21: Instructor evaluation scores by age and gender with interaction model fit added (same as Figure <a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#fig:evalsscat">19</a> but without jittering).
</p>
</div>
<p><br></p>
<strong>From the interaction model, what would be the teaching score of a female instructor aged 37?</strong>
<div id="radio_RLKYOLIESX" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_RLKYOLIESX" value=""></input> <span>4.286</span></label><label><input type="radio" autocomplete="off" name="radio_RLKYOLIESX" value=""></input> <span>4.311</span></label><label><input type="radio" autocomplete="off" name="radio_RLKYOLIESX" value="answer"></input> <span>4.214</span></label><label><input type="radio" autocomplete="off" name="radio_RLKYOLIESX" value=""></input> <span>4.227</span></label>
</div>
<p><br></p>
<strong>From the interaction model, what would be the teaching score of a male instructor aged 52?</strong>
<div id="radio_OHBHFMDHZX" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_OHBHFMDHZX" value=""></input> <span>4.298</span></label><label><input type="radio" autocomplete="off" name="radio_OHBHFMDHZX" value="answer"></input> <span>4.226</span></label><label><input type="radio" autocomplete="off" name="radio_OHBHFMDHZX" value=""></input> <span>3.944</span></label><label><input type="radio" autocomplete="off" name="radio_OHBHFMDHZX" value=""></input> <span>3.877</span></label>
</div>
<p><br></p>
<p>How do they compare with the teaching score values from the parallel regression lines model?</p>
<p>Here, we can see that, although the intercept for male instructors may be lower, the associated average <strong>decrease</strong> in teaching score with every year increase in age (0.004) is not as severe as it is for female instructors (0.018).</p>
</div>
<div id="assessing-model-fit-3" class="section level2 unnumbered hasAnchor">
<h2>Assessing model fit<a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#assessing-model-fit-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now we have to assess the fit of the model by looking at plots of the residuals. We shall do this for the interaction model. First, we need to obtain the fitted values and residuals from the interaction model as follows:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb74-1" aria-hidden="true" tabindex="-1"></a>regression.points <span class="ot">&lt;-</span> <span class="fu">get_regression_points</span>(int.model)</span></code></pre></div>
<pre><code># A tibble: 463 x 6
      ID score   age gender score_hat residual
   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;
 1     1   4.7    36 female      4.25    0.448
 2     2   4.1    36 female      4.25   -0.152
 3     3   3.9    36 female      4.25   -0.352
 4     4   4.8    36 female      4.25    0.548
 5     5   4.6    59 male        4.20    0.399
 6     6   4.3    59 male        4.20    0.099
 7     7   2.8    59 male        4.20   -1.40 
 8     8   4.1    51 male        4.23   -0.133
 9     9   3.4    51 male        4.23   -0.833
10    10   4.5    40 female      4.18    0.318
# ... with 453 more rows
# i Use `print(n = ...)` to see more rows</code></pre>
<p>Let's start by looking at a scatterplot of the residuals against the explanatory variable by gender:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(regression.points, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> residual)) <span class="sc">+</span></span>
<span id="cb76-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb76-3"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;age&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Residual&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-4"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb76-5"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> gender)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:intresid1"></span>
<img src="main_files/figure-html/intresid1-1.png" alt="Residuals vs the explanatory variable age by gender." width="90%" />
<p class="caption">
Figure 22: Residuals vs the explanatory variable age by gender.
</p>
</div>
<p><br></p>
<strong>Do the assumptions of the residuals having mean zero and constant variability across all levels of the explanatory variable hold?</strong>
<div id="radio_NILKJMAGSK" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_NILKJMAGSK" value="answer"></input> <span>Yes</span></label><label><input type="radio" autocomplete="off" name="radio_NILKJMAGSK" value=""></input> <span>No</span></label>
</div>
<div class="webex-solution">
<button>
Answer
</button>
<p>There is an even scatter of points above and below the zero line indicating the residuals have mean zero. The scattering of the points is also constant across all values of the explanatory variable with no systematic pattern observed in the residuals.</p>
</div>
<p><br></p>
<p>Now, we can plot the residuals against the fitted values:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(regression.points, <span class="fu">aes</span>(<span class="at">x =</span> score_hat, <span class="at">y =</span> residual)) <span class="sc">+</span></span>
<span id="cb77-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb77-3"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Fitted values&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Residual&quot;</span>) <span class="sc">+</span></span>
<span id="cb77-4"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb77-5"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> gender)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:intresid2"></span>
<img src="main_files/figure-html/intresid2-1.png" alt="Residuals vs the fitted values." width="90%" />
<p class="caption">
Figure 23: Residuals vs the fitted values.
</p>
</div>
<p><br></p>
<strong>Do the assumptions of the residuals having mean zero and constant variability across all levels of the fitted values hold?</strong>
<div id="radio_SCOWMCGVFX" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SCOWMCGVFX" value="answer"></input> <span>Yes</span></label><label><input type="radio" autocomplete="off" name="radio_SCOWMCGVFX" value=""></input> <span>No</span></label>
</div>
<div class="webex-solution">
<button>
Answer
</button>
<p>There is an even scatter of points above and below the zero line indicating the residuals have mean zero. The scattering of the points is also constant across all values of the fitted values with no systematic pattern observed in the residuals. We can also see that the range of fitted values for male instructors is narrower than that of female instructors.</p>
</div>
<p><br></p>
<p>Finally, let's plot histograms of the residuals to assess whether they are normally distributed with mean zero:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(regression.points, <span class="fu">aes</span>(<span class="at">x =</span> residual)) <span class="sc">+</span></span>
<span id="cb78-2"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.25</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb78-3"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Residual&quot;</span>) <span class="sc">+</span></span>
<span id="cb78-4"><a href="regression-modelling-with-one-continuous-and-one-categorical-explanatory-variable.html#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>gender)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:intresid3"></span>
<img src="main_files/figure-html/intresid3-1.png" alt="Histograms of the residuals by gender." width="90%" />
<p class="caption">
Figure 24: Histograms of the residuals by gender.
</p>
</div>
<p><br></p>
<strong>Do the residuals appear to be normally distributed with mean zero?</strong>
<div id="radio_DPWEATBJZE" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DPWEATBJZE" value=""></input> <span>Yes</span></label><label><input type="radio" autocomplete="off" name="radio_DPWEATBJZE" value="answer"></input> <span>No</span></label>
</div>
<div class="webex-solution">
<button>
Answer
</button>
<p>Our subjective impression is that the residuals do not appear to be bell-shaped, but rather left-skewed (and more so for males). More formal analysis of the normality of the residuals should be pursued.</p>
</div>
<p><br>
<br></p>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="regression-modelling-with-two-continuous-explanatory-variables.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="further-tasks-multiple-linear-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
